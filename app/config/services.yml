parameters:
    # https://github.com/schmittjoh/JMSSerializerBundle/pull/270
    # not really happy about doing this, but there is no proper config
    # for setting camelcase, so we overwrite the default naming strategy here to match the name
    # of the property in the php class
    jms_serializer.cache_naming_strategy.class: JMS\Serializer\Naming\IdenticalPropertyNamingStrategy

    tagcade.security.auth.voter.site.class: Tagcade\Security\Authorization\Voter\SiteVoter
    tagcade.security.auth.voter.ad_slot.class: Tagcade\Security\Authorization\Voter\AdSlotVoter
    tagcade.security.auth.voter.library_display_ad_slot.class: Tagcade\Security\Authorization\Voter\LibraryDisplayAdSlotVoter
    tagcade.security.auth.voter.dynamic_ad_slot.class: Tagcade\Security\Authorization\Voter\DynamicAdSlotVoter
    tagcade.security.auth.voter.library_dynamic_ad_slot.class: Tagcade\Security\Authorization\Voter\LibraryDynamicAdSlotVoter
    tagcade.security.auth.voter.native_ad_slot.class: Tagcade\Security\Authorization\Voter\NativeAdSlotVoter
    tagcade.security.auth.voter.library_native_ad_slot.class: Tagcade\Security\Authorization\Voter\LibraryNativeAdSlotVoter
    tagcade.security.auth.voter.ad_tag.class: Tagcade\Security\Authorization\Voter\AdTagVoter
    tagcade.security.auth.voter.library_ad_tag.class: Tagcade\Security\Authorization\Voter\LibraryAdTagVoter
    tagcade.security.auth.voter.library_slot_tag.class: Tagcade\Security\Authorization\Voter\LibrarySlotTagVoter
    tagcade.security.auth.voter.ad_network.class: Tagcade\Security\Authorization\Voter\AdNetworkVoter
    tagcade.security.auth.voter.user.class: Tagcade\Security\Authorization\Voter\PublisherVoter
    tagcade.security.auth.voter.channel.class: Tagcade\Security\Authorization\Voter\ChannelVoter

    tagcade.security.auth.voter.library_expresison.class: Tagcade\Security\Authorization\Voter\LibraryExpressionVoter

    # event dispatched on user action such as add, remove, delete
    tagcade.events.handler_event: 'tagcade.events.handler_event'

services:
    tagcade.security.auth.voter.library_slot_tag:
        class:  %tagcade.security.auth.voter.library_slot_tag.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.voter.site:
        class:  %tagcade.security.auth.voter.site.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.voter.ad_slot:
        class:  %tagcade.security.auth.voter.ad_slot.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.voter.library_display_ad_slot:
            class:  %tagcade.security.auth.voter.library_display_ad_slot.class%
            public: false
            tags:
                - { name: security.voter }

    tagcade.security.auth.voter.dynamic_ad_slot:
        class:  %tagcade.security.auth.voter.dynamic_ad_slot.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.voter.library_dynamic_ad_slot:
            class:  %tagcade.security.auth.voter.library_dynamic_ad_slot.class%
            public: false
            tags:
                - { name: security.voter }

    tagcade.security.auth.voter.native_ad_slot:
        class:  %tagcade.security.auth.voter.native_ad_slot.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.voter.library_native_ad_slot:
            class:  %tagcade.security.auth.voter.library_native_ad_slot.class%
            public: false
            tags:
                - { name: security.voter }

    tagcade.security.auth.voter.ad_tag:
        class:  %tagcade.security.auth.voter.ad_tag.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.voter.library_ad_tag:
        class:  %tagcade.security.auth.voter.library_ad_tag.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.voter.ad_network:
        class:  %tagcade.security.auth.voter.ad_network.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.voter.user:
        class:  %tagcade.security.auth.voter.user.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.library_expression.user:
        class:  %tagcade.security.auth.voter.library_expresison.class%
        public: false
        tags:
            - { name: security.voter }

    tagcade.security.auth.voter.channel:
            class:  %tagcade.security.auth.voter.channel.class%
            public: false
            tags:
                - { name: security.voter }

    tagcade.service.tag_generator:
        class: Tagcade\Service\TagGenerator
        arguments:
            - %tc.base_tag_url%

    tagcade.service.console_output:
        class: Symfony\Component\Console\Output\ConsoleOutput

    tagcade.handler.handler_abstract:
        class: Tagcade\Handler\HandlerAbstract
        abstract: true
        public: false
        calls:
            - [setEventDispatcher, ["@event_dispatcher"]]
            - [setEvent, [%tagcade.events.handler_event%]]

    # jms serializer cache

    cache.apc.jms_serializer:
        class: Doctrine\Common\Cache\ApcCache
        calls:
            - [setNamespace, ["jms_serializer"]]

    jms_serializer.metadata_cache.apc:
        class: Metadata\Cache\DoctrineCacheAdapter
        arguments:
            - ""
            - @cache.apc.jms_serializer

    tagcade.service.date_util:
        class: Tagcade\Service\DateUtil

    tagcade.worker.manager:
        class: Tagcade\Worker\Manager
        arguments:
            - @tagcade.service.date_util
            - @leezy.pheanstalk

    tagcade.worker.workers.update_revenue_worker:
        class: Tagcade\Worker\Workers\UpdateRevenueWorker
        arguments:
            - @tagcade.service.date_util
            - @tagcade.service.revenue_editor
            - @tagcade.domain_manager.ad_tag
            - @tagcade.domain_manager.ad_network
            - @tagcade.domain_manager.site

    tagcade.service.array_util:
        class: Tagcade\Service\ArrayUtil
