parameters:
    tagcade.bundle.user.entity.user.class: Tagcade\Bundle\UserBundle\Entity\User

services:
    tagcade.factory.user_role:
        class: Tagcade\Factory\UserRoleFactory

    # returns our role model class for the current authenticated user entity
    tagcade.user_role:
        class: Tagcade\Model\User\Role\UserRoleInterface
        factory_service: tagcade.factory.user_role
        factory_method: getRole
        arguments: ["@=service('security.context').getToken() != null ? service('security.context').getToken().getUser() : null"]

    tagcade.repository.user:
        class: Doctrine\ORM\EntityRepository
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - %tagcade.bundle.user.entity.user.class%