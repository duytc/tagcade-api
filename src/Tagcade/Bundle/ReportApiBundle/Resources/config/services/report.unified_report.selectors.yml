#parameters:
# ...

services:
    ### Unified report repositories ###
    tagcade.repository.report.unified_report.pulse_point.account_management:
        class: Tagcade\Repository\Report\UnifiedReport\PulsePoint\AccountManagementRepositoryInterface
        factory_service: doctrine.orm.unifiedreport_entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\UnifiedReport\PulsePoint\AccountManagement

    tagcade.repository.report.unified_report.pulse_point.daily:
        class: Tagcade\Repository\Report\UnifiedReport\PulsePoint\DailyReportRepositoryInterface
        factory_service: doctrine.orm.unifiedreport_entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\UnifiedReport\PulsePoint\Daily

    tagcade.repository.report.unified_report.pulse_point.domain_impression:
        class: Tagcade\Repository\Report\UnifiedReport\PulsePoint\DomainReportRepositoryInterface
        factory_service: doctrine.orm.unifiedreport_entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\UnifiedReport\PulsePoint\DomainImpression

    tagcade.repository.report.unified_report.pulse_point.country_daily:
        class: Tagcade\Repository\Report\UnifiedReport\PulsePoint\CountryDailyRepositoryInterface
        factory_service: doctrine.orm.unifiedreport_entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\UnifiedReport\PulsePoint\CountryDaily

    tagcade.repository.report.unified_report.pulse_point.ad_tag_domain_impression:
        class: Tagcade\Repository\Report\UnifiedReport\PulsePoint\AdTagDomainImpressionRepositoryInterface
        factory_service: doctrine.orm.unifiedreport_entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\UnifiedReport\PulsePoint\AdTagDomainImpression

    ### Unified report selectors ###
    tagcade.service.report.unified_report.pulse_point.selector.selectors.account_management:
        class: Tagcade\Service\Report\UnifiedReport\Selector\PulsePoint\AccountManagement
        arguments:
            - @tagcade.repository.report.unified_report.pulse_point.account_management
            - %knp_paginator.page_range%
        tags:
            - { name: knp_paginator.injectable, paginator: knp_paginator }

    tagcade.service.report.unified_report.pulse_point.selector.selectors.daily:
        class: Tagcade\Service\Report\UnifiedReport\Selector\PulsePoint\Daily
        arguments:
            - @tagcade.repository.report.unified_report.pulse_point.daily
            - %knp_paginator.page_range%
        tags:
            - { name: knp_paginator.injectable, paginator: knp_paginator }

    tagcade.service.report.unified_report.pulse_point.selector.selectors.domain_impression:
        class: Tagcade\Service\Report\UnifiedReport\Selector\PulsePoint\DomainImpression
        arguments:
            - @tagcade.repository.report.unified_report.pulse_point.domain_impression
            - %knp_paginator.page_range%
        tags:
            - { name: knp_paginator.injectable, paginator: knp_paginator }

    tagcade.service.report.unified_report.pulse_point.selector.selectors.country_daily:
        class: Tagcade\Service\Report\UnifiedReport\Selector\PulsePoint\CountryDaily
        arguments:
            - @tagcade.repository.report.unified_report.pulse_point.country_daily
            - %knp_paginator.page_range%
        tags:
            - { name: knp_paginator.injectable, paginator: knp_paginator }

    tagcade.service.report.unified_report.pulse_point.selector.selectors.ad_tag_domain_impression:
        class: Tagcade\Service\Report\UnifiedReport\Selector\PulsePoint\AdTagDomainImpression
        arguments:
            - @tagcade.repository.report.unified_report.pulse_point.ad_tag_domain_impression
            - %knp_paginator.page_range%
        tags:
            - { name: knp_paginator.injectable, paginator: knp_paginator }

    # custom for adTag-country
    tagcade.service.report.unified_report.pulse_point.selector.selectors.ad_tag_country:
        class: Tagcade\Service\Report\UnifiedReport\Selector\PulsePoint\AdTagCountry
        arguments:
            - @tagcade.repository.report.unified_report.pulse_point.country_daily
            - %knp_paginator.page_range%
        tags:
            - { name: knp_paginator.injectable, paginator: knp_paginator }

    # custom for adTagGroup-daily
    tagcade.service.report.unified_report.pulse_point.selector.selectors.ad_tag_group_daily:
        class: Tagcade\Service\Report\UnifiedReport\Selector\PulsePoint\AdTagGroupDaily
        arguments:
            - @tagcade.repository.report.unified_report.pulse_point.account_management
            - %knp_paginator.page_range%
        tags:
            - { name: knp_paginator.injectable, paginator: knp_paginator }

    # custom for adTagGroup-country
    tagcade.service.report.unified_report.pulse_point.selector.selectors.ad_tag_group_country:
        class: Tagcade\Service\Report\UnifiedReport\Selector\PulsePoint\AdTagGroupCountry
        arguments:
            - @tagcade.repository.report.unified_report.pulse_point.country_daily
            - %knp_paginator.page_range%
        tags:
            - { name: knp_paginator.injectable, paginator: knp_paginator }

    ### Unified selector service ###
    tagcade.service.report.unified_report.report_grouper:
        class: Tagcade\Service\Report\UnifiedReport\Grouper\ReportGrouper

    ### Unified selector service ###
    tagcade.service.report.unified_report.selector.report_selector:
        class: Tagcade\Service\Report\UnifiedReport\Selector\ReportSelector
        arguments:
            -
                # account_management selectors
                - @tagcade.service.report.unified_report.pulse_point.selector.selectors.account_management
                # daily selectors
                - @tagcade.service.report.unified_report.pulse_point.selector.selectors.daily
                # domain_impression selectors
                - @tagcade.service.report.unified_report.pulse_point.selector.selectors.domain_impression
                # country_daily selectors
                - @tagcade.service.report.unified_report.pulse_point.selector.selectors.country_daily
                # ad_tag_domain_impression selectors
                - @tagcade.service.report.unified_report.pulse_point.selector.selectors.ad_tag_domain_impression
                # ad_tag_country selectors (custom)
                - @tagcade.service.report.unified_report.pulse_point.selector.selectors.ad_tag_country
                # ad_tag_group_daily selectors (custom)
                - @tagcade.service.report.unified_report.pulse_point.selector.selectors.ad_tag_group_daily
                # ad_tag_group_country selectors (custom)
                - @tagcade.service.report.unified_report.pulse_point.selector.selectors.ad_tag_group_country
            - @tagcade.service.report.unified_report.report_grouper

    ### knp paginator subscribers
    tagcade.service.report.unified_report.paginator.subscriber:
        class: Tagcade\Bundle\ReportApiBundle\Subscriber\UnifiedReportPaginationSubscriber
        tags:
            - { name: knp_paginator.subscriber }