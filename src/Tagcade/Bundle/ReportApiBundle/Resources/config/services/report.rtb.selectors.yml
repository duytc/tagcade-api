services:

    ### Rtb report repositories

    tagcade.repository.report.rtb_report.hierarchy.platform:
        class: Tagcade\Repository\Report\RtbReport\Hierarchy\PlatformReportRepositoryInterface
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\RtbReport\PlatformReport

    tagcade.repository.report.rtb_report.hierarchy.account:
        class: Tagcade\Repository\Report\RtbReport\Hierarchy\AccountReportRepositoryInterface
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\RtbReport\AccountReport

    tagcade.repository.report.rtb_report.hierarchy.site:
        class: Tagcade\Repository\Report\RtbReport\Hierarchy\SiteReportRepositoryInterface
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\RtbReport\SiteReport

    tagcade.repository.report.rtb_report.hierarchy.ad_slot:
        class: Tagcade\Repository\Report\RtbReport\Hierarchy\AdSlotReportRepositoryInterface
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\RtbReport\AdSlotReport

    tagcade.repository.report.rtb_report.hierarchy.ron_ad_slot:
        class: Tagcade\Repository\Report\RtbReport\Hierarchy\RonAdSlotReportRepositoryInterface
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - Tagcade\Entity\Report\RtbReport\RonAdSlotReport

    ### Rtb report selectors

    tagcade.service.report.rtb_report.selector.selectors.hierarchy.platform:
        class: Tagcade\Service\Report\RtbReport\Selector\Selectors\Hierarchy\Platform
        arguments:
            - @tagcade.repository.report.rtb_report.hierarchy.platform

    tagcade.service.report.rtb_report.selector.selectors.hierarchy.account:
        class: Tagcade\Service\Report\RtbReport\Selector\Selectors\Hierarchy\Account
        arguments:
            - @tagcade.repository.report.rtb_report.hierarchy.account

    tagcade.service.report.rtb_report.selector.selectors.hierarchy.site:
        class: Tagcade\Service\Report\RtbReport\Selector\Selectors\Hierarchy\Site
        arguments:
            - @tagcade.repository.report.rtb_report.hierarchy.site

    tagcade.service.report.rtb_report.selector.selectors.hierarchy.ad_slot:
        class: Tagcade\Service\Report\RtbReport\Selector\Selectors\Hierarchy\AdSlot
        arguments:
            - @tagcade.repository.report.rtb_report.hierarchy.ad_slot

    tagcade.service.report.rtb_report.selector.selectors.hierarchy.ron_ad_slot:
        class: Tagcade\Service\Report\RtbReport\Selector\Selectors\Hierarchy\RonAdSlot
        arguments:
            - @tagcade.repository.report.rtb_report.hierarchy.ron_ad_slot

    ### Report grouper service

    tagcade.service.report.rtb_report.selector.grouper.report_grouper:
        class: Tagcade\Service\Report\RtbReport\Selector\Grouper\ReportGrouper

    ### Report selector service

    tagcade.service.report.rtb_report.selector.report_selector:
        class: Tagcade\Service\Report\RtbReport\Selector\ReportSelector
        arguments:
            -
                # selectors
                - @tagcade.service.report.rtb_report.selector.selectors.hierarchy.platform
                - @tagcade.service.report.rtb_report.selector.selectors.hierarchy.account
                - @tagcade.service.report.rtb_report.selector.selectors.hierarchy.site
                - @tagcade.service.report.rtb_report.selector.selectors.hierarchy.ad_slot
                - @tagcade.service.report.rtb_report.selector.selectors.hierarchy.ron_ad_slot
            - @tagcade.service.date_util
            - @tagcade.service.report.rtb_report.selector.grouper.report_grouper
            - @tagcade.service.report.rtb_report.creator.snapshot_report_creator

    ###

    tagcade.server.report.rtb_report.selector.report_builder:
        class: Tagcade\Service\Report\RtbReport\Selector\ReportBuilder
        arguments:
            - @tagcade.service.report.rtb_report.selector.report_selector
            - @tagcade.service.date_util
            - @tagcade_user.domain_manager.publisher
            - @tagcade.domain_manager.ad_network
            - @tagcade.domain_manager.site
            - @tagcade.domain_manager.ad_slot
            - @tagcade.domain_manager.ron_ad_slot

